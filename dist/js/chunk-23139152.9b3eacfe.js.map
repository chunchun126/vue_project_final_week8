{"version":3,"sources":["webpack:///./src/views/frontend/Cart.vue?1719","webpack:///src/views/frontend/Cart.vue","webpack:///./src/views/frontend/Cart.vue?b128","webpack:///./src/views/frontend/Cart.vue","webpack:///./src/views/frontend/Cart.vue?dfd8"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","isLoading","on","$event","staticClass","_m","_v","staticRenderFns","staticStyle","data","carts","cartTotal","status","loadingItem","created","getCart","methods","addToCart","product","id","quantity","$http","post","url","cart","get","updateTotal","forEach","updateQuantity","patch","component"],"mappings":"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","file":"js/chunk-23139152.9b3eacfe.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('loading',{attrs:{\"active\":_vm.isLoading},on:{\"update:active\":function($event){_vm.isLoading=$event}}}),_c('div',{staticClass:\"container pt-5\"},[_vm._m(0),_c('div',{staticClass:\"row mb-5\"},[_c('div',{staticClass:\"col-md-8 offset-2\"},[_vm._m(1),_c('router-link',{staticClass:\"btn btn-sm btn-primary rounded-0 mt-3 d-block\",attrs:{\"to\":\"/orders\"}},[_vm._v(\"下一步 \")])],1)])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',{staticClass:\"step list-unstyled d-flex text-center\\n      justify-content-center pb-5 text-primary\"},[_c('li',[_c('p',[_vm._v(\"購物車\")]),_c('div',{staticClass:\"step-line\"}),_c('div',{staticClass:\"step-sign solid\"})]),_c('li',[_c('p',[_vm._v(\"填寫訂單\")]),_c('div',{staticClass:\"step-line\"}),_c('div',{staticClass:\"step-sign\"})]),_c('li',[_c('p',[_vm._v(\"確認訂單\")]),_c('div',{staticClass:\"step-line\"}),_c('div',{staticClass:\"step-sign\"})]),_c('li',[_c('p',[_vm._v(\"交易成功\")]),_c('div',{staticClass:\"step-sign\"})])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"content p-3\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-6\"},[_c('div',{staticClass:\"imageArea\"},[_c('img',{staticClass:\"img-fluid\",attrs:{\"src\":\"https://images.unsplash.com/photo-1598560917682-2577f42feff6?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1350&q=80\"}}),_c('a',{staticClass:\"delete\",attrs:{\"href\":\"\"}},[_vm._v(\"✕\")])])]),_c('div',{staticClass:\"col-md-6\"},[_c('h1',{staticClass:\"h5 mt-2\"},[_vm._v(\"深海藍寶鑽戒\")]),_c('div',{staticClass:\"d-flex mb-2\"},[_c('span',{staticClass:\"w-25\"},[_vm._v(\"數量\")]),_c('div',{staticClass:\"input-group input-group-sm w-75\"},[_c('div',{staticClass:\"input-group-prepend\"},[_c('button',{staticClass:\"btn btn-outline-secondary rounded-0 align-middle\",attrs:{\"type\":\"button\",\"id\":\"button-addon1\"}},[_c('i',{staticClass:\"fas fa-minus\"})])]),_c('input',{staticClass:\"form-control text-center input-style\",attrs:{\"type\":\"text\",\"placeholder\":\"1\",\"aria-label\":\"Example text with button addon\",\"aria-describedby\":\"button-addon1\"}}),_c('div',{staticClass:\"input-group-append\"},[_c('button',{staticClass:\"btn btn-outline-secondary rounded-0\",attrs:{\"type\":\"button\",\"id\":\"button-addon2\"}},[_c('i',{staticClass:\"fas fa-plus\"})])])])]),_c('div',{staticClass:\"d-flex\"},[_c('span',[_vm._v(\"小計\")]),_c('span',{staticClass:\"ml-auto\"},[_vm._v(\"NT $ 11,200\")])])]),_c('div',{staticClass:\"col-12\"},[_c('hr',{staticStyle:{\"border-top\":\"1px solid black\"}})])]),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-6 offset-md-6\"},[_c('div',{staticClass:\"form-group d-flex mb-0\"},[_c('label',{staticClass:\"col-sm-6 col-form-label pl-0\",attrs:{\"for\":\"coupon\"}},[_vm._v(\"優惠碼\")]),_c('input',{staticClass:\"form-control input-style\",attrs:{\"type\":\"text\",\"id\":\"coupon\"}})])]),_c('div',{staticClass:\"col-md-6 offset-md-6 d-flex\"},[_c('span',[_vm._v(\"優惠碼折扣\")]),_c('span',{staticClass:\"ml-auto\"},[_vm._v(\" － NT $ 1000\")])]),_c('div',{staticClass:\"col-12 d-flex\"},[_c('div',{staticClass:\"ml-auto\",staticStyle:{\"border-bottom\":\"solid 1px\"}},[_vm._v(\"合計 NT $ 22,400\")])])])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <loading :active.sync=\"isLoading\"></loading>\n    <div class=\"container pt-5\">\n      <ul class=\"step list-unstyled d-flex text-center\n        justify-content-center pb-5 text-primary\">\n        <li>\n          <p>購物車</p>\n          <div class=\"step-line\"></div>\n          <div class=\"step-sign solid\"></div>\n        </li>\n        <li>\n          <p>填寫訂單</p>\n          <div class=\"step-line\"></div>\n          <div class=\"step-sign\"></div>\n        </li>\n        <li>\n          <p>確認訂單</p>\n          <div class=\"step-line\"></div>\n          <div class=\"step-sign\"></div>\n        </li>\n        <li>\n          <p>交易成功</p>\n          <div class=\"step-sign\"></div>\n        </li>\n      </ul>\n      <div class=\"row mb-5\">\n        <div class=\"col-md-8 offset-2\">\n          <div class=\"content p-3\">\n            <div class=\"row\">\n              <div class=\"col-md-6\">\n                <div class=\"imageArea\">\n                  <img class=\"img-fluid\"\n                    src=\"https://images.unsplash.com/photo-1598560917682-2577f42feff6?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1350&q=80\">\n                  <a href=\"\" class=\"delete\">✕</a>\n                </div>\n              </div>\n              <div class=\"col-md-6\">\n                <h1 class=\"h5 mt-2\">深海藍寶鑽戒</h1>\n                <div class=\"d-flex mb-2\">\n                  <span class=\"w-25\">數量</span>\n                  <div class=\"input-group input-group-sm w-75\">\n                    <div class=\"input-group-prepend\">\n                      <button class=\"btn btn-outline-secondary rounded-0 align-middle\"\n                        type=\"button\" id=\"button-addon1\">\n                        <i class=\"fas fa-minus\"></i>\n                      </button>\n                    </div>\n                    <input type=\"text\" class=\"form-control text-center input-style\" placeholder=\"1\"\n                      aria-label=\"Example text with button addon\" aria-describedby=\"button-addon1\">\n                    <div class=\"input-group-append\">\n                      <button class=\"btn btn-outline-secondary rounded-0\"\n                        type=\"button\" id=\"button-addon2\">\n                        <i class=\"fas fa-plus\"></i>\n                      </button>\n                    </div>\n                  </div>\n                </div>\n                <div class=\"d-flex\">\n                  <span>小計</span>\n                  <span class=\"ml-auto\">NT $ 11,200</span>\n                </div>\n              </div>\n              <div class=\"col-12\">\n                <hr style=\"border-top: 1px solid black\">\n              </div>\n            </div>\n            <div class=\"row\">\n              <div class=\"col-md-6 offset-md-6\">\n                <div class=\"form-group d-flex mb-0\">\n                  <label for=\"coupon\" class=\"col-sm-6 col-form-label pl-0\">優惠碼</label>\n                  <input type=\"text\" class=\"form-control input-style\" id=\"coupon\">\n                </div>\n              </div>\n              <div class=\"col-md-6 offset-md-6 d-flex\">\n                <span>優惠碼折扣</span>\n                <span class=\"ml-auto\"> － NT $ 1000</span>\n              </div>\n              <div class=\"col-12 d-flex\">\n                <div class=\"ml-auto\" style=\"border-bottom: solid 1px\">合計  NT $ 22,400</div>\n              </div>\n            </div>\n          </div>\n          <router-link :to=\"`/orders`\"\n            class=\"btn btn-sm btn-primary rounded-0 mt-3 d-block\">下一步\n          </router-link>\n        </div>\n      </div>\n\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      isLoading: false,\n      carts: [], // 陣列建議屬性名稱加上複數 s\n      cartTotal: 0,\n      status: {\n        loadingItem: '', // loadingItem 給預設值，需預先定義，不然會出錯\n      },\n    };\n  },\n  created() {\n    this.getCart();\n  },\n  methods: {\n    // 加到購物車（post）\n    addToCart(id, quantity = 1) { // 需代入 商品 id 及 商品數量（因為 api 文件上為 required）\n      // quantity=1 參數預設值給 1（因為最少會加入 1 個產品，不會加 0 個）\n      // 宣告新增某一筆購物車資料的 api\n      const url = `${process.env.VUE_APP_APIPATH}/${process.env.VUE_APP_UUID}/ec/shopping`;\n      // 還沒取得資料時的讀取效果\n      this.isLoading = true;\n      const cart = {\n        product: id, // id 透過參數的方式代入\n        quantity, // quantity: quantity 的簡寫，數量也是透過參數的方式代入\n      };\n      // console.log(cart);  // 比對傳回來的值是否和文件一樣\n      // AJAX\n      this.$http.post(url, cart) // （網址, 要傳送的物件）\n        // 成功\n        .then((res) => {\n          this.isLoading = false; // 移除 loading 效果\n          console.log(res);\n        })\n        // 失敗\n        .catch((error) => {\n          this.isLoading = false; // 移除 loading 效果\n          console.log(error.response); // 回傳錯誤的訊息\n        });\n    },\n\n    // 取出購物車的內容（get）\n    getCart() {\n      // 宣告取得購物車列表 api\n      const url = `${process.env.VUE_APP_APIPATH}/${process.env.VUE_APP_UUID}/ec/shopping`;\n      // 還沒取得資料時的讀取效果\n      this.isLoading = true;\n      // AJAX\n      this.$http.get(url)\n        .then((res) => {\n          this.isLoading = false; // 移除 loading 效果\n          console.log('取出購物車的內容 成功', res);\n          this.carts = res.data.data;\n\n          // 購物清單的總計會出現無限累加的現象，\n          // 最簡單的解決方法為「每次進行累加時，就清空 this.cartTotal = 0」\n          this.cartTotal = 0;\n          // 執行 updateTotal 累加總金額\n          this.updateTotal();\n        })\n        // 失敗\n        .catch((error) => {\n          this.isLoading = false; // 移除 loading 效果\n          console.log('取出購物車的內容 失敗', error.response); // 回傳錯誤的訊息\n        });\n    },\n\n    // 總金額加總 拉出來寫成一個方法，這樣不論是增加或刪減才不會出錯\n    updateTotal() {\n      // 購物車金額加總\n      this.carts.forEach((item) => {\n        this.cartTotal += item.product.price * item.quantity;\n      });\n    },\n\n    // 更新購物車商品的數量\n    updateQuantity(id, quantity) {\n      // 宣告更新某一筆購物車資料 api\n      const url = `${process.env.VUE_APP_APIPATH}/${process.env.VUE_APP_UUID}/ec/shopping`;\n      // 還沒取得資料時的讀取效果\n      this.isLoading = true;\n      const cart = {\n        product: id,\n        quantity,\n      };\n      // AJAX\n      this.$http.patch(url, cart)\n        .then((res) => {\n          this.isLoading = false; // 移除讀取效果\n          console.log(res);\n          // 跑完之後要重新取得購物車資料\n          this.getCart();\n        })\n        // 失敗\n        .catch((error) => {\n          this.isLoading = false; // 移除 loading 效果\n          console.log(error.response); // 回傳錯誤的訊息\n        });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n.delete {\n  display: block;\n  position: absolute;\n  top: -10px;\n  right: -10px;\n  width: 28px;\n  height: 28px;\n  background: #7f7f7f;\n  color: #fff;\n  border-radius: 50%;\n  line-height: 25px;\n  font-size: 16px;\n  text-align: center;\n  font-weight: bold;\n  padding-top: 2px;\n  padding-left: 1px;\n  &:hover {\n    color: #000;\n    text-decoration: none;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Cart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Cart.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Cart.vue?vue&type=template&id=4dcb05ba&\"\nimport script from \"./Cart.vue?vue&type=script&lang=js&\"\nexport * from \"./Cart.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Cart.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Cart.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Cart.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}