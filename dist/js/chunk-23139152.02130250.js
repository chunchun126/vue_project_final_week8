(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-23139152"],{2355:function(t,a,s){"use strict";s.r(a);var i=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),s("div",{staticClass:"container pt-5"},[t._m(0),t.carts.length>0?s("div",{staticClass:"row mb-5"},[s("div",{staticClass:"col-md-8 offset-md-2"},[s("div",{staticClass:"text-left"},[s("button",{staticClass:"btn btn-sm btn-secondary\n            rounded-0 border-bottom-0",staticStyle:{"font-size":"8px"},attrs:{type:"button"},on:{click:t.deleteAllCart}},[t._v("全部刪除 ")])]),s("div",{staticClass:"content p-3"},[t._l(t.carts,(function(a){return s("div",{key:a.id,staticClass:"row"},[s("div",{staticClass:"col-md-7"},[s("div",{staticClass:"imageArea"},[s("router-link",{attrs:{to:"product/"+a.product.id}},[s("div",{staticClass:"overflowHidden"},[s("div",{staticClass:"rounded-0 item-img img-fluid",staticStyle:{height:"300px"},style:"background-image: url("+a.product.imageUrl[0]+")"})])]),s("a",{staticClass:"delete",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.deleteOneCart(a)}}},[t._v("✕")])],1)]),s("div",{staticClass:"col-md-5 d-flex flex-column justify-content-between"},[s("div",{staticClass:"h5 mt-2 pb-1",staticStyle:{"border-bottom":"1px solid"}},[t._v(t._s(a.product.title)+" "),s("small",{staticClass:"badge rounded-0 ml-1 mb-2 bg-main border-0",staticStyle:{"font-size":"10px"}},[t._v(" "+t._s(a.product.category)+" ")])]),t._m(1,!0),s("div",{staticClass:"addNumber"},[s("div",{staticClass:"d-flex mb-2 align-items-center"},[s("span",{staticClass:"w-25"},[t._v("數量")]),s("div",{staticClass:"input-group input-group-sm w-75"},[s("div",{staticClass:"input-group-prepend"},[s("button",{staticClass:"btn btn-outline-secondary rounded-0",attrs:{type:"button",disabled:a.quantity<=1},on:{click:function(s){return t.updateQuantity(a.product.id,a.quantity-1)}}},[s("i",{staticClass:"fas fa-minus align-middle"})])]),s("input",{directives:[{name:"model",rawName:"v-model",value:a.quantity,expression:"item.quantity"}],staticClass:"form-control text-center bg-white",attrs:{type:"number",min:"1",disabled:""},domProps:{value:a.quantity},on:{change:function(s){return t.updateQuantity(a.product.id,a.quantity)},input:function(s){s.target.composing||t.$set(a,"quantity",s.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-outline-secondary rounded-0",attrs:{type:"button"},on:{click:function(s){return t.updateQuantity(a.product.id,a.quantity+1)}}},[s("i",{staticClass:"fas fa-plus align-middle"})])])])]),s("div",{staticClass:"d-flex"},[s("span",[t._v("價格")]),s("span",{staticClass:"ml-auto"},[t._v(" NT $ "+t._s(t._f("thousands")(a.product.price+"/"+a.product.unit))+" ")])])])]),t._m(2,!0)])})),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-5 offset-md-7"},[s("div",{staticClass:"form-group"},[s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.couponCode,expression:"couponCode"}],staticClass:"form-control input-style",attrs:{type:"text",id:"coupon",placeholder:"請輸入優惠碼"},domProps:{value:t.couponCode},on:{input:function(a){a.target.composing||(t.couponCode=a.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-primary input-style",attrs:{type:"button"},on:{click:t.addCoupon}},[t._v(" 套用優惠碼 ")])])])])]),t.coupon.enabled?s("div",{staticClass:"col-md-5 offset-md-7 d-flex text-primary"},[s("span",[t._v("優惠碼折扣")]),s("span",{staticClass:"ml-auto"},[t._v(" － NT $ "+t._s(t.coupon.percent))])]):t._e(),s("div",{staticClass:"col-md-5 offset-md-7 d-flex mt-3"},[s("span",{staticClass:"pt-1"},[t._v("合計")]),t.coupon.enabled?s("div",{staticClass:"ml-auto px-2 pt-1",staticStyle:{border:"solid 1px","font-size":"22px"}},[t._v(" NT $ "+t._s(t._f("thousands")(t.cartTotal-t.coupon.percent))+" ")]):s("div",{staticClass:"ml-auto px-2 pt-1",staticStyle:{border:"solid 1px","font-size":"22px"}},[t._v(" NT $ "+t._s(t._f("thousands")(t.cartTotal))+" ")])])])],2),s("router-link",{staticClass:"btn btn-sm btn-primary rounded-0 mt-3 d-block btn-next",attrs:{to:"/orders"}},[t._v("下一步 ")])],1)]):s("div",{staticClass:"py-5"},[s("div",{staticClass:"text-center my-5"},[s("h6",{staticClass:"mb-3"},[t._v("購物袋中目前沒有產品。")]),s("router-link",{staticClass:"btn btn-primary",attrs:{to:"/products"}},[t._v(" 選購去 ")])],1)])])],1)},e=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ul",{staticClass:"step list-unstyled d-flex text-center\n      justify-content-center pb-5 text-primary"},[s("li",[s("p",[t._v("購物袋")]),s("div",{staticClass:"step-line"}),s("div",{staticClass:"step-sign solid"})]),s("li",[s("p",{staticClass:"text-muted"},[t._v("填寫訂單")]),s("div",{staticClass:"step-line bg-secondary"}),s("div",{staticClass:"step-sign",staticStyle:{border:"solid 2px gray"}})]),s("li",[s("p",{staticClass:"text-muted"},[t._v("確認訂單")]),s("div",{staticClass:"step-line bg-secondary"}),s("div",{staticClass:"step-sign",staticStyle:{border:"solid 2px gray"}})]),s("li",[s("p",{staticClass:"text-muted"},[t._v("交易成功")]),s("div",{staticClass:"step-sign",staticStyle:{border:"solid 2px gray"}})])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"text-white"},[s("small",{staticClass:"text-white badge rounded-0 ml-1 mb-2 bg-primary border-0",staticStyle:{"font-size":"10px"}},[t._v(" 優惠商品。 ")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"col-12"},[s("hr",{staticStyle:{"border-top":"1px solid black"}})])}],n=(s("99af"),s("4160"),s("159b"),{name:"Cart",data:function(){return{isLoading:!1,carts:[],cartTotal:0,status:{loadingItem:""},couponCode:"",coupon:{}}},created:function(){this.getCart()},methods:{addToCart:function(t){var a=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i="".concat("https://course-ec-api.hexschool.io/api","/").concat("8997512c-2d60-40a2-b4a3-5240bcc586d0","/ec/shopping");this.isLoading=!0;var e={product:t,quantity:s};this.$http.post(i,e).then((function(){a.isLoading=!1})).catch((function(){a.isLoading=!1}))},getCart:function(){var t=this,a="".concat("https://course-ec-api.hexschool.io/api","/").concat("8997512c-2d60-40a2-b4a3-5240bcc586d0","/ec/shopping");this.isLoading=!0,this.$http.get(a).then((function(a){t.isLoading=!1,t.carts=a.data.data,t.cartTotal=0,t.updateTotal()})).catch((function(){t.isLoading=!1}))},updateTotal:function(){var t=this;this.carts.forEach((function(a){t.cartTotal+=a.product.price*a.quantity}))},updateQuantity:function(t,a){var s=this,i="".concat("https://course-ec-api.hexschool.io/api","/").concat("8997512c-2d60-40a2-b4a3-5240bcc586d0","/ec/shopping");this.isLoading=!0;var e={product:t,quantity:a};this.$http.patch(i,e).then((function(){s.isLoading=!1,s.getCart()})).catch((function(){s.isLoading=!1}))},deleteAllCart:function(){var t=this;this.isLoading=!0;var a="".concat("https://course-ec-api.hexschool.io/api","/").concat("8997512c-2d60-40a2-b4a3-5240bcc586d0","/ec/shopping/all/product");this.$http.delete(a).then((function(){t.isLoading=!1,t.$bus.$emit("update-total"),t.getCart()})).catch((function(){t.isLoading=!1}))},deleteOneCart:function(t){var a=this;this.isLoading=!0;var s="".concat("https://course-ec-api.hexschool.io/api","/").concat("8997512c-2d60-40a2-b4a3-5240bcc586d0","/ec/shopping/").concat(t.product.id);this.$http.delete(s).then((function(){a.isLoading=!1,a.$bus.$emit("update-total"),a.getCart()})).catch((function(){a.isLoading=!1}))},addCoupon:function(){var t=this,a="".concat("https://course-ec-api.hexschool.io/api","/").concat("8997512c-2d60-40a2-b4a3-5240bcc586d0","/ec/coupon/search");this.isLoading=!0,this.$http.post(a,{code:this.couponCode}).then((function(a){t.isLoading=!1,t.coupon=a.data.data})).catch((function(){t.isLoading=!1,alert("此優惠碼無效")}))}}}),o=n,c=(s("ed1e"),s("2877")),d=Object(c["a"])(o,i,e,!1,null,null,null);a["default"]=d.exports},6971:function(t,a,s){},ed1e:function(t,a,s){"use strict";var i=s("6971"),e=s.n(i);e.a}}]);
//# sourceMappingURL=chunk-23139152.02130250.js.map